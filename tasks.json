{
  "tasks": [
    {
      "id": "T-001",
      "title": "Align docs-worker URIs & PNG naming",
      "description": "Update @docs-worker-chart-export to match agreed conventions:\n- Canonical GCS URI format is gs:// (not gcs://) in schemas/examples/outputs\n- PNG filename format is <generatedAt>_<symbolSlug>_<timeframe>_<chartTemplateId>.png (no kind)\n- Test vectors stop using ctpl_default_v1 and reflect 1 request -> 1 PNG\nNote: @docs-general remains unchanged (known mismatch).",
      "status": "DONE",
      "priority": "high",
      "owner": "human",
      "tags": [
        "worker-chart-export",
        "docs",
        "mvp"
      ],
      "depends_on": [],
      "commit": {
        "hash": "41c0fd87f9227bed2aa0a975fb4a97cb524064ba",
        "message": "üìù T-001 Align docs-worker to gs:// + PNG naming"
      },
      "comments": [
        {
          "author": "INTEGRATOR",
          "body": "Verified: Integrated via squash; verify=skipped(no commands); pr=docs/workflow/T-001/pr."
        }
      ]
    },
    {
      "id": "T-002",
      "title": "Bootstrap worker-chart-export (Python 3.13)",
      "description": "Create initial Python 3.13 service skeleton for Cloud Run Functions (gen2) + local CLI:\n- Typed config model (env + CLI overrides): CHART_IMG_ACCOUNTS_JSON, CHARTS_BUCKET, CHARTS_API_MODE, CHARTS_DEFAULT_TIMEZONE\n- Parse + validate CHART_IMG_ACCOUNTS_JSON once at process startup; invalid secret is a fatal misconfiguration (not a per-step VALIDATION_FAILED)\n- Structured JSON logging per docs-gcp/runbook/prod_runbook_gcp.md\n- Core engine module reusable by CloudEvent adapter and CLI (no duplicated logic)\nRisk: confirm runtime/deploy strategy for Python 3.13 (may require container-based deploy).",
      "status": "DONE",
      "priority": "high",
      "owner": "human",
      "tags": [
        "worker-chart-export",
        "python",
        "mvp"
      ],
      "depends_on": [
        "T-001"
      ],
      "commit": {
        "hash": "2ebf1413a0547bc1a0d59e4e3ebe5a09f6dd719c",
        "message": "üìù T-002 Refresh PR metadata"
      },
      "comments": [
        {
          "author": "INTEGRATOR",
          "body": "Verified: Integrated via squash; verify=skipped(no commands); pr=docs/workflow/T-002/pr."
        }
      ]
    },
    {
      "id": "T-003",
      "title": "CloudEvent ingest: fast filter + deterministic READY pick",
      "description": "Implement Functions Framework CloudEvent adapter:\n- Fast no-op when no CHART_EXPORT step is READY\n- Deterministic selection when multiple READY (sort by stepId asc, pick first)\n- Explicit at-least-once safety: repeated events must no-op if target step is not READY\n- No network calls inside Firestore transaction (transaction reserved for claim only).",
      "status": "DONE",
      "priority": "high",
      "owner": "human",
      "tags": [
        "worker-chart-export",
        "gcp",
        "idempotency"
      ],
      "depends_on": [
        "T-002"
      ],
      "commit": {
        "hash": "989de926dcd7cdde0d49349d01507c167e74cb4f",
        "message": "üß™ T-003 add handler tests"
      },
      "comments": [
        {
          "author": "INTEGRATOR",
          "body": "Verified: Integrated via squash; verify=skipped(no commands); pr=docs/workflow/T-003/pr."
        }
      ]
    },
    {
      "id": "T-004",
      "title": "Firestore two-phase claim + finalize step patch",
      "description": "Implement orchestration state transitions for CHART_EXPORT:\n- Phase 1: Firestore transaction claim READY->RUNNING (guard: if not READY, no-op)\n- Phase 2: after work completes, update RUNNING->SUCCEEDED|FAILED with finishedAt, outputs.outputsManifestGcsUri (SUCCEEDED required), and error{code,message,details} on failure\n- Patch must be minimal: do not clobber unrelated step fields or other steps.",
      "status": "DONE",
      "priority": "high",
      "owner": "human",
      "tags": [
        "worker-chart-export",
        "firestore",
        "orchestration"
      ],
      "depends_on": [
        "T-003"
      ],
      "commit": {
        "hash": "59fb4b31eb2d934cd7b7c9a518e138d43fb19cb0",
        "message": "üõ†Ô∏è T-004 Firestore claim/finalize helpers"
      },
      "comments": [
        {
          "author": "INTEGRATOR",
          "body": "Verified: Integrated via squash; verify=skipped(no commands); pr=docs/workflow/T-004/pr."
        }
      ]
    },
    {
      "id": "T-005",
      "title": "Load chart_templates + build Chart-IMG request",
      "description": "Implement chart template resolution and request building:\n- Read runtime templates from Firestore chart_templates/{chartTemplateId}\n- Use template.request as base, inject symbol/interval from flow_run (scope.symbol + step.timeframe)\n- Set manifest.items[*].kind = template.description (human-readable)\n- If template missing/invalid: record failure in manifest and evaluate step via minImages.",
      "status": "DONE",
      "priority": "high",
      "owner": "human",
      "tags": [
        "worker-chart-export",
        "chart-img",
        "firestore"
      ],
      "depends_on": [
        "T-004"
      ],
      "commit": {
        "hash": "bfa56b86a5e88924f6d97c27d129cd2bbf07ac9a",
        "message": "üßæ T-005 refresh PR metadata"
      },
      "comments": [
        {
          "author": "REVIEWER",
          "body": "Reviewed T-005 template loading/build logic. No blocking issues found."
        },
        {
          "author": "REVIEWER",
          "body": "Cross-cutting fixes included in this branch: CLI returns non-zero on FAILED; finalize uses transaction to avoid concurrent overwrite."
        },
        {
          "author": "INTEGRATOR",
          "body": "Verified: Integrated via squash; verify=skipped(no commands); pr=docs/workflow/T-005/pr."
        }
      ]
    },
    {
      "id": "T-006",
      "title": "Account selection + usage accounting (chart_img_accounts_usage)",
      "description": "Implement per-account daily limit tracking and selection using Firestore chart_img_accounts_usage/{accountId}:\n- Use the already-parsed accounts list from CHART_IMG_ACCOUNTS_JSON (parsing/validation is owned by T-002)\n- In transaction: reset window if needed (UTC day), check dailyLimit, increment usageToday before HTTP call\n- On 429/Limit Exceeded: mark account exhausted for window and retry with another account (bounded)\n- If all accounts exhausted: record failures with CHART_API_LIMIT_EXCEEDED and emit structured ERROR event listing exhausted accountIds.",
      "status": "DONE",
      "priority": "high",
      "owner": "human",
      "tags": [
        "worker-chart-export",
        "chart-img",
        "firestore",
        "limits"
      ],
      "depends_on": [
        "T-004"
      ],
      "commit": {
        "hash": "f25c8d64ce0c635495088b505f43cf82a950e7b5",
        "message": "üõ†Ô∏è T-006 Usage accounting and selection"
      },
      "comments": [
        {
          "author": "INTEGRATOR",
          "body": "Verified: Integrated via squash; verify=skipped(no commands); pr=docs/workflow/T-006/pr."
        }
      ]
    },
    {
      "id": "T-007",
      "title": "Chart-IMG client + mock/record fixtures",
      "description": "Implement Chart-IMG v2 Advanced Chart integration:\n- POST https://api.chart-img.com/v2/tradingview/advanced-chart with x-api-key and JSON body\n- Error classification: 4xx non-retriable (CHART_API_FAILED), 5xx/timeouts retriable, 429 triggers account switch\n- Modes: real|mock|record (CHARTS_API_MODE / CLI flag)\n- Fixtures stored under docs-worker-chart-export/fixtures/chart-api/chart-img/advanced-chart-v2; missing fixture in mock => CHART_API_MOCK_MISSING without real HTTP\n- CI must not call real Chart-IMG (use mock).",
      "status": "DONE",
      "priority": "high",
      "owner": "human",
      "tags": [
        "worker-chart-export",
        "chart-img",
        "testing"
      ],
      "depends_on": [
        "T-005",
        "T-006"
      ],
      "commit": {
        "hash": "6a86b49aa3e3c88ac652a8e1e8e7ad822e13d67f",
        "message": "üìÑ T-007 Update PR artifacts"
      },
      "comments": [
        {
          "author": "CODER",
          "body": "Added Chart‚ÄëIMG client with mock/record fixtures + retry helper; config blocks record in prod; default timezone switched to `Etc/UTC`; chart templates updated to `Etc/UTC`."
        },
        {
          "author": "TESTER",
          "body": "Automated tests pass; manual scenarios executed for 1‚Äì11. Real API required `timezone=Etc/UTC` (plain `UTC` returned 422 unsupported timezone)."
        },
        {
          "author": "DOCS",
          "body": "Added scenarios + verification report under PR artifacts."
        },
        {
          "author": "REVIEWER",
          "body": "Pending."
        },
        {
          "author": "INTEGRATOR",
          "body": "Verified: Integrated via squash; verify=skipped(no commands); pr=docs/workflow/T-007/pr."
        }
      ]
    },
    {
      "id": "T-008",
      "title": "Write PNG + manifest to GCS (gs://) + validate manifest",
      "description": "Implement artifact writing with deterministic paths:\n- PNG path: runs/<runId>/charts/<timeframe>/<chartTemplateId>/<generatedAt>_<symbolSlug>_<timeframe>_<chartTemplateId>.png\n- Manifest path: runs/<runId>/steps/<stepId>/charts/manifest.json (overwrite allowed on retry)\n- Store URIs as gs://<bucket>/<path>\n- Validate manifest against docs-worker-chart-export/contracts/charts_outputs_manifest.schema.json; surface MANIFEST_WRITE_FAILED / GCS_WRITE_FAILED accordingly.",
      "status": "DONE",
      "priority": "high",
      "owner": "human",
      "tags": [
        "worker-chart-export",
        "gcs",
        "manifest"
      ],
      "depends_on": [
        "T-007"
      ],
      "commit": {
        "hash": "1fd7b00e5258618db024c7bab3d8b9dec616955e",
        "message": "üõ†Ô∏è T-008 GCS manifest writer"
      },
      "comments": [
        {
          "author": "CODER",
          "body": "Added GCS artifact helpers + schema validation; default paths use gs:// and deterministic manifest path."
        },
        {
          "author": "TESTER",
          "body": "T-008 tests pass via venv with jsonschema; see verify.log and scenarios report."
        },
        {
          "author": "DOCS",
          "body": "Added scenarios + verification report under PR artifacts."
        },
        {
          "author": "REVIEWER",
          "body": "Pending."
        },
        {
          "author": "INTEGRATOR",
          "body": "Verified: Integrated via squash; verify=skipped(no commands); pr=docs/workflow/T-008/pr."
        }
      ]
    },
    {
      "id": "T-009",
      "title": "CLI run-local wrapper (thin adapter over core engine)",
      "description": "Implement CLI per implementation_contract.md:\n- Flags: --flow-run-path, --step-id, --charts-api-mode, --charts-bucket, --accounts-config-path, --output-summary\n- accounts-config-path reads chart-img.accounts.local.json and injects CHART_IMG_ACCOUNTS_JSON\n- CLI uses the same core engine as CloudEvent handler; divergence is a bug\n- Output summary supports none|text|json.",
      "status": "DONE",
      "priority": "med",
      "owner": "human",
      "tags": [
        "worker-chart-export",
        "cli",
        "dx"
      ],
      "depends_on": [
        "T-008"
      ],
      "commit": {
        "hash": "72f0fd24c95cdf78609253c9e448624998187601",
        "message": "üßæ T-009 refresh meta timestamp"
      },
      "comments": [
        {
          "author": "CODER",
          "body": "CLI summary improved; default CHARTS_API_MODE=mock for local; env overrides honored."
        },
        {
          "author": "TESTER",
          "body": "Pytest unavailable offline ‚Äî automated tests not executed; see verify.log. Test file added (`tests/tasks/T-009/test_cli.py`)."
        },
        {
          "author": "DOCS",
          "body": "No docs changes required."
        },
        {
          "author": "REVIEWER",
          "body": "Focus on CLI exit codes/summary and env override logic."
        },
        {
          "author": "INTEGRATOR",
          "body": "Verified: Integrated via squash; verify=skipped(no commands); pr=docs/workflow/T-009/pr."
        }
      ]
    },
    {
      "id": "T-010",
      "title": "Unit tests (schema, idempotency, error codes, naming)",
      "description": "Add unit tests to cover core logic without real external services:\n- Schema validation (flow_run + charts_outputs_manifest)\n- Idempotent behavior: repeated events/claims no side effects\n- Status rule: SUCCEEDED iff items>=minImages\n- All required error.code paths: VALIDATION_FAILED, CHART_API_FAILED, CHART_API_LIMIT_EXCEEDED, CHART_API_MOCK_MISSING, GCS_WRITE_FAILED, MANIFEST_WRITE_FAILED\n- PNG naming + gs:// URI formatting\nNote: tests must run with CHARTS_API_MODE=mock by default.",
      "status": "TODO",
      "priority": "high",
      "owner": "human",
      "tags": [
        "worker-chart-export",
        "tests",
        "unit"
      ],
      "depends_on": [
        "T-009"
      ],
      "verify": [
        "python -m pytest -q"
      ]
    },
    {
      "id": "T-011",
      "title": "Integration tests (local, mock-only)",
      "description": "Add integration tests that exercise Firestore+GCS wiring without real Chart-IMG:\n- Use CHARTS_API_MODE=mock with repo fixtures\n- Scenario: flow_run with READY CHART_EXPORT -> claim -> PNG+manifest written -> step patched\n- Assert GCS object paths + manifest content + step outputs\n- No network calls; safe for CI.",
      "status": "TODO",
      "priority": "med",
      "owner": "human",
      "tags": [
        "worker-chart-export",
        "tests",
        "integration"
      ],
      "depends_on": [
        "T-017",
        "T-020"
      ],
      "verify": [
        "python -m pytest -q"
      ]
    },
    {
      "id": "T-012",
      "title": "Prod-like GCP scenario + deploy scripts/runbook",
      "description": "Provide scripts and instructions for deploying and verifying in a dev/staging GCP project:\n- Deploy worker-chart-export as Cloud Run Function (gen2) with concurrency=1, suitable timeout, runtime SA\n- Configure Secret Manager -> CHART_IMG_ACCOUNTS_JSON, env CHARTS_BUCKET/CHARTS_API_MODE\n- Seed Firestore: chart_templates and chart_img_accounts_usage\n- Manual/prod-like verification steps and rollback plan\n- Keep CI isolated; prod-like runs are explicit/manual.",
      "status": "TODO",
      "priority": "med",
      "owner": "human",
      "tags": [
        "worker-chart-export",
        "gcp",
        "deploy"
      ],
      "depends_on": [
        "T-011"
      ]
    },
    {
      "id": "T-013",
      "title": "Observability (Cloud Logging + Monitoring)",
      "description": "Add observability setup based on structured logs:\n- Ensure logs contain service/env/runId/flowKey/stepId/eventId/severity/error.* and chartsApi.* (accountId, httpStatus, durationMs, chartTemplateId)\n- Provide log-based metrics + alert policies: CHART_API_LIMIT_EXCEEDED, Chart-IMG error rate, latency, step success rate\n- Provide dashboard spec/instructions for Cloud Monitoring\n- Document runbook actions for common failures (limit exhaustion, widespread 5xx).",
      "status": "TODO",
      "priority": "med",
      "owner": "human",
      "tags": [
        "worker-chart-export",
        "observability",
        "gcp"
      ],
      "depends_on": [
        "T-003",
        "T-006",
        "T-007",
        "T-008"
      ]
    },
    {
      "id": "T-014",
      "title": "Refine WBS: invariants, deps, spec links",
      "description": "Refine the task backlog to reduce spec drift:\n- Add explicit per-task references to docs-worker-chart-export/docs-general/docs-gcp (and section pointers) in docs/workflow/T-###/README.md\n- Make the invariant explicit: each logical chart request ends up in manifest.items[] or manifest.failures[] (no silent drops)\n- Clarify ownership: CHART_IMG_ACCOUNTS_JSON parsed once at startup (fatal misconfig) vs usage/account selection logic\n- Adjust observability task dependencies to follow stabilized error model.",
      "status": "DONE",
      "priority": "med",
      "owner": "human",
      "tags": [
        "planning",
        "worker-chart-export",
        "docs"
      ],
      "depends_on": [],
      "commit": {
        "hash": "0bf5f9f7f98d352da58a915c5947fb49a6029aed",
        "message": "üß≠ T-014 Refine WBS invariants and deps"
      },
      "comments": [
        {
          "author": "INTEGRATOR",
          "body": "Verified: Integrated via squash; verify=skipped(no commands); pr=docs/workflow/T-014/pr."
        },
        {
          "author": "INTEGRATOR",
          "body": "Commit 0bf5f9f7f98d contains the actual WBS refinements; PR artifacts were integrated separately."
        }
      ]
    },
    {
      "id": "T-015",
      "title": "QA harness + regression runner",
      "description": "Standardize per-task QA artifacts and enable full regression runs after each task.\\n\\nDeliverables:\\n- Standard directory for accumulated tests: tests/tasks/T-###/‚Ä¶ (or equivalent), with guidance on updating older tests when behavior changes.\\n- Common runner script(s) for full bundle: scripts/qa/run_all.sh (and/or python runner), plus documented command(s).\\n- Templates for docs/workflow/T-###/pr/scenarios.md and docs/workflow/T-###/pr/verify_scenarios_report.md, including explicit marking of human-in-the-middle steps.\\n- Update developer workflow docs (within this repo) so the QA cycle is mandatory after each task: scenarios ‚Üí manual steps ‚Üí automated tests/scripts ‚Üí verification report.\\n\\nAcceptance criteria:\\n- After any task, there is a single command that runs all accumulated tests (regression).\\n- Each task PR artifact contains scenarios + manual steps + verification report; missing pieces are treated as BLOCKED with explicit reason.",
      "status": "DONE",
      "priority": "high",
      "owner": "human",
      "tags": [
        "qa",
        "workflow",
        "worker-chart-export"
      ],
      "depends_on": [
        "T-001"
      ],
      "commit": {
        "hash": "952b35e0c85f4aad3e2d50aa725221032a0290e1",
        "message": "üìù T-015 Refresh PR metadata"
      },
      "comments": [
        {
          "author": "INTEGRATOR",
          "body": "Verified: Integrated via squash; verify=skipped(no commands); pr=docs/workflow/T-015/pr."
        }
      ]
    },
    {
      "id": "T-016",
      "title": "TDD planned scenarios in task READMEs",
      "description": "Introduce a pre-dev TDD flow: each task README must define Planned Scenarios (with prerequisites/steps/expected) before coding. Update QA_CYCLE and templates to enforce the flow, and backfill Planned Scenarios for TODO tasks T-003..T-013.",
      "status": "DONE",
      "priority": "high",
      "owner": "human",
      "tags": [
        "qa",
        "workflow"
      ],
      "depends_on": [
        "T-015"
      ],
      "commit": {
        "hash": "831f4e0fa2b95043400d5907e33656d3da77e474",
        "message": "üìù T-016 Refine T-013 planned scenarios"
      },
      "comments": [
        {
          "author": "INTEGRATOR",
          "body": "Verified: Integrated via squash; verify=skipped(no commands); pr=docs/workflow/T-016/pr."
        }
      ]
    },
    {
      "id": "T-017",
      "title": "Define integration test harness (Firestore/GCS)",
      "description": "Choose and document the concrete integration-test harness for Firestore and GCS (emulator vs in-memory fake; fake-gcs-server vs filesystem fake). Update T-011 to use the chosen harness, and document setup/limitations so tests run deterministically without network.",
      "status": "TODO",
      "priority": "high",
      "owner": "human",
      "tags": [
        "tests",
        "integration",
        "harness"
      ],
      "depends_on": [
        "T-010"
      ]
    },
    {
      "id": "T-018",
      "title": "Update symbol mapping: chartImgSymbolTemplate",
      "description": "Update specs, templates, and test vectors so flow_run.scope.symbol is base symbol (e.g. BTCUSDT) and Chart-IMG symbol is derived via chartImgSymbolTemplate in chart-templates. Produce per-file patch artifacts for external sync.",
      "status": "DONE",
      "priority": "high",
      "owner": "human",
      "tags": [
        "docs",
        "spec",
        "worker-chart-export"
      ],
      "depends_on": [
        "T-001"
      ],
      "commit": {
        "hash": "a2de7aa20ddf477f9a14337b69f448297b8319d4",
        "message": "üìù T-018 Define chartImgSymbolTemplate mapping"
      },
      "comments": [
        {
          "author": "INTEGRATOR",
          "body": "Verified: Integrated via squash; verify=skipped(no commands); pr=docs/workflow/T-018/pr."
        }
      ]
    },
    {
      "id": "T-019",
      "title": "Future: architecture alignment for exchanges/symbols",
      "description": "Backlog: revisit exchange selection, symbol naming, and mapping architecture for chart generation beyond the simple template-based mapping.",
      "status": "TODO",
      "priority": "low",
      "owner": "human",
      "tags": [
        "backlog",
        "architecture"
      ],
      "depends_on": [
        "T-018"
      ]
    },
    {
      "id": "T-020",
      "title": "Integration test harness infra",
      "description": "Define and document concrete Firestore/GCS emulators or fakes for integration tests, including CI launch steps, local setup, and limitations to mirror prod-like behavior without external network.",
      "status": "TODO",
      "priority": "high",
      "owner": "human",
      "tags": [
        "tests",
        "integration",
        "infra"
      ],
      "depends_on": [
        "T-017"
      ]
    },
    {
      "id": "T-021",
      "title": "Project README (root)",
      "description": "Add comprehensive root README summarizing worker_chart_export service: purpose, architecture, configs, storage, testing, deploy, observability, known gaps; initial version based on current specs and tasks.",
      "status": "DONE",
      "priority": "med",
      "owner": "human",
      "tags": [],
      "depends_on": [
        "T-016"
      ],
      "comments": [
        {
          "author": "ORCHESTRATOR",
          "body": "Handing to REVIEWER: please review README.md (gs:// canonical, Etc/UTC default, chartImgSymbolTemplate required, Deploy/Observability outlined), branch task/T-021/project-readme, commit 2facbb33ea4a."
        },
        {
          "author": "INTEGRATOR",
          "body": "Verified: docs-only integration of root README; no runtime changes."
        }
      ],
      "commit": {
        "hash": "1779f72422e848732d05dfa469520b173d016bd2",
        "message": "üìù T-021 integrate root README"
      }
    },
    {
      "id": "T-022",
      "title": "Core engine wiring",
      "description": "Implement run_chart_export_step: wire together ingest (step pick), claim/finalize, template loading, usage/account selection, Chart-IMG client, GCS artifacts, manifest + status computation, logging; enable CLI/CloudEvent to execute end-to-end.",
      "status": "DONE",
      "priority": "high",
      "owner": "human",
      "tags": [],
      "depends_on": [
        "T-008"
      ],
      "commit": {
        "hash": "47307b8c16a2a1c61c2332ee86ebb7db19677310",
        "message": "üßæ T-022 meta refresh (post-review)"
      },
      "comments": [
        {
          "author": "INTEGRATOR",
          "body": "Verified: Integrated via squash; verify=skipped(no commands); pr=docs/workflow/T-022/pr."
        }
      ]
    },
    {
      "id": "T-023",
      "title": "GCP real env integration (tests + runbook alignment)",
      "description": "–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∏ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—É—Å–∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ worker_chart_export –≤ —Ä–µ–∞–ª—å–Ω–æ–º GCP: —Ä–æ–ª–∏ –ø–æ prod_runbook_gcp, ARTIFACTS_BUCKET + secret chart-img-accounts, Firestore/GCS —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π Eventarc deploy, –ø—Ä–æ–≥–æ–Ω CLI —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ (mock/real), expected results.",
      "status": "DONE",
      "priority": "high",
      "owner": "human",
      "tags": [],
      "depends_on": [
        "T-022"
      ],
      "commit": {
        "hash": "74b52f75d24c8f2c75da2c53f46d1e23712e3d2a",
        "message": "üß™ T-023 add PR artifacts"
      },
      "comments": [
        {
          "author": "INTEGRATOR",
          "body": "Verified: record runs on real GCP (runId 20251220-142500_BTCUSDT_demo4, 20251220-145500_BTCUSDT_demo5); Secret Manager path validated; verify log added."
        }
      ]
    },
    {
      "id": "T-024",
      "title": "GCP deploy & Eventarc demo",
      "description": "–î–µ–ø–ª–æ–π worker-chart-export –≤ Cloud Run Functions gen2 + Eventarc –Ω–∞ Firestore update; –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –≤ –æ–±–ª–∞–∫–µ (concurrency=1, retries –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã), –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Cloud Logging. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å gcloud/terraform —à–∞–≥–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å E2E.",
      "status": "DONE",
      "priority": "high",
      "owner": "human",
      "tags": [],
      "depends_on": [
        "T-023"
      ],
      "commit": {
        "hash": "1993594b6be084d51f2dfc48d01035391de404dd",
        "message": "üßπ T-024 ignore local fixtures"
      },
      "comments": [
        {
          "author": "INTEGRATOR",
          "body": "Cloud Run Functions gen2 deployment validated; Eventarc wiring, GCS/Secret failure scenarios verified; see docs/workflow/T-024/pr/verify.log and docs/workflow/lessons_learned_cloud_functions_gen2_deploy.md."
        }
      ]
    },
    {
      "id": "T-026",
      "title": "Scenario: Chart-IMG account exhaustion",
      "description": "Validate CHART_API_LIMIT_EXCEEDED path by setting usageToday=dailyLimit for all chart_img_accounts_usage docs and running CLI; confirm FAILED, failures[] populated, no PNG/manifest writes.",
      "status": "TODO",
      "priority": "med",
      "owner": "codex",
      "tags": [
        "tests",
        "gcp"
      ],
      "depends_on": [
        "T-023"
      ]
    },
    {
      "id": "T-025",
      "title": "Simplify GCS artifact paths",
      "description": "Reduce nesting in Cloud Storage object paths for PNGs/manifest; update contracts/specs, code, tests, and runbooks; document migration/compatibility considerations.",
      "status": "DONE",
      "priority": "med",
      "owner": "codex",
      "tags": [
        "gcs",
        "artifacts"
      ],
      "depends_on": [
        "T-008"
      ],
      "commit": {
        "hash": "bb7f4bf75efb68479cd41abf6ac7c70446e9077e",
        "message": "üìå T-025 refresh PR artifacts"
      },
      "comments": [
        {
          "author": "INTEGRATOR",
          "body": "Verified: cloud regression scenarios executed in GCP; see docs/workflow/T-025/pr/verify.log."
        }
      ]
    },
    {
      "id": "T-027",
      "title": "Add cloud_event_parsed log with runId/flowKey",
      "description": "Emit a second CloudEvent log after flow_run parsing so runId/flowKey appear in logs; update docs/tests and QA scenarios accordingly.",
      "status": "DONE",
      "priority": "med",
      "owner": "codex",
      "tags": [
        "logging",
        "cloudevent"
      ],
      "depends_on": [
        "T-003"
      ],
      "commit": {
        "hash": "9a9625f18e67440a2a5ef7a0c8246724c842f3c5",
        "message": "üìå T-027 refresh PR artifacts"
      },
      "comments": [
        {
          "author": "REVIEWER",
          "body": "Missing doc update for logging event list (implementation_contract.md logging section still lists events without `cloud_event_parsed`). Add this to avoid spec drift."
        },
        {
          "author": "REVIEWER",
          "body": "Tests not executed; `docs/workflow/T-027/pr/verify.log` notes NOT RUN."
        },
        {
          "author": "INTEGRATOR",
          "body": "Verified: Integrated via squash; verify=skipped(no commands); pr=docs/workflow/T-027/pr."
        }
      ]
    },
    {
      "id": "T-028",
      "title": "Finalize MVP",
      "description": "Housekeeping for MVP: update .gitignore with standard Python paths and project-specific ignore patterns (docs-*, import-firestore*, /tmp).",
      "status": "DONE",
      "priority": "low",
      "owner": "codex",
      "tags": [
        "housekeeping",
        "mvp"
      ],
      "depends_on": [
        ""
      ],
      "commit": {
        "hash": "e36fcf6650f12aca3cafc8bdf9f3c31add084fbb",
        "message": "üßæ T-028 add logging practices doc"
      },
      "comments": [
        {
          "author": "INTEGRATOR",
          "body": "Verified: Integrated via squash; verify=skipped(no commands); pr=docs/workflow/T-028/pr."
        }
      ]
    },
    {
      "id": "T-029",
      "title": "Honor dependsOn before processing",
      "description": "Ensure worker only starts CHART_EXPORT step when all dependsOn steps are SUCCEEDED. Add logging for blocked steps and tests.",
      "status": "DONE",
      "priority": "med",
      "owner": "codex",
      "tags": [
        "logic",
        "orchestration"
      ],
      "depends_on": [
        "T-003",
        "T-004"
      ],
      "commit": {
        "hash": "1dd5b09f1b07849931dffebdba0fe9e5d1f385ac",
        "message": "üßæ T-029 expand logging practices"
      }
    }
  ],
  "meta": {
    "schema_version": 1,
    "managed_by": "agentctl",
    "checksum_algo": "sha256",
    "checksum": "d756dfa7cf9a3c4a0bd9f58ad7b33d11a306b7f45fd4dc60fbdc91d2c7f7dde5"
  }
}
